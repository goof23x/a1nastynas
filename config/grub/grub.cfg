# A1NAS Enhanced GRUB Configuration for Build Integration
# Professional branding compatible with live-build system

# Basic GRUB settings for live-build
set timeout=30
set default=0

# Load required modules for live system
insmod all_video
insmod gfxterm
insmod png
insmod jpeg
insmod part_gpt
insmod part_msdos
insmod iso9660
insmod loopback

# Custom colors for A1NAS branding
set color_normal=cyan/black
set color_highlight=white/blue

# A1NAS Professional Header
echo -e "\033[0;36m"
echo "╔══════════════════════════════════════════════════════════════════╗"
echo "║     ▄▀█ ▄█ █▄ █ ▄▀█ █▀   █▄ █ ██▀ ▀█▀ █ █ █ █▀█ █▀█ █▄▀        ║"
echo "║     █▄█ ▀█ █▀▄█ █▄█ ▄█   █▀▄█ ██▄  █  ▀▄▀▄▀ █▄█ █▀▄ █ █        ║"
echo "║                                                                  ║"
echo "║           🚀 A1NAS - NETWORK ATTACHED STORAGE OS 🚀             ║"
echo "║                      Professional Edition                       ║"
echo "╚══════════════════════════════════════════════════════════════════╝"
echo -e "\033[0m"

# A1NAS Boot Menu Entries (compatible with live-build)
menuentry "🚀 A1NAS Live Mode (Default)" --class a1nas {
    echo "🔄 Loading A1NAS Live System..."
    linux /live/vmlinuz boot=live components username=a1nas nosplash quiet splash
    initrd /live/initrd
}

menuentry "⚡ A1NAS Performance Mode" --class a1nas {
    echo "⚡ Loading A1NAS Performance Mode..."
    echo "   ➤ Optimized for storage workloads"
    linux /live/vmlinuz boot=live components username=a1nas acpi_osi=Linux pcie_aspm=off processor.max_cstate=1
    initrd /live/initrd
}

menuentry "🔧 A1NAS Debug Mode" --class a1nas {
    echo "🔧 Loading A1NAS Debug Mode..."
    echo "   ➤ Verbose logging enabled"
    linux /live/vmlinuz boot=live components username=a1nas debug systemd.log_level=debug
    initrd /live/initrd
}

menuentry "🛡️ A1NAS Safe Mode" --class a1nas {
    echo "🛡️ Loading A1NAS Safe Mode..."
    echo "   ➤ Minimal drivers for compatibility"
    linux /live/vmlinuz boot=live components username=a1nas nomodeset acpi=off
    initrd /live/initrd
}

menuentry "💾 A1NAS Persistent Storage" --class a1nas {
    echo "💾 Loading A1NAS with Persistent Storage..."
    echo "   ➤ Changes will be saved"
    linux /live/vmlinuz boot=live components username=a1nas persistence
    initrd /live/initrd
}

menuentry "🧰 A1NAS Recovery Mode" --class a1nas {
    echo "🧰 Loading A1NAS Recovery Mode..."
    echo "   ➤ Emergency access mode"
    linux /live/vmlinuz boot=live components username=a1nas single
    initrd /live/initrd
}

menuentry "💻 A1NAS Text Mode" --class a1nas {
    echo "💻 Loading A1NAS Text Mode..."
    linux /live/vmlinuz boot=live components username=a1nas text systemd.unit=multi-user.target
    initrd /live/initrd
}

menuentry "🔄 Reboot System" {
    echo "🔄 Rebooting system..."
    reboot
}

menuentry "⚡ Shutdown System" {
    echo "⚡ Shutting down system..."
    halt
}

# Boot information
echo ""
echo -e "\033[1;33m⏱️  A1NAS will boot automatically in 30 seconds...\033[0m"
echo -e "\033[0;36m� Press any key to access boot options\033[0m"
echo -e "\033[0;32m🚀 Welcome to A1NAS - The Future of Network Storage!\033[0m"
echo ""
echo -e "\033[0;37m📋 Boot Options:\033[0m"
echo -e "\033[0;32m   • Live Mode: Standard desktop experience\033[0m"
echo -e "\033[0;32m   • Performance: Optimized for storage workloads\033[0m"
echo -e "\033[0;32m   • Debug: Troubleshooting with verbose logs\033[0m"
echo -e "\033[0;32m   • Safe: Compatibility mode for older hardware\033[0m"